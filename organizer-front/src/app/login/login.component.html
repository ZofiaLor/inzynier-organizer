<mat-card class="login-box">
    <mat-card-header>
      <mat-card-title><h2>Login</h2></mat-card-title>
    </mat-card-header>
  
    <mat-card-content>
      @if (!isLoggedIn) {
      <form [formGroup]="form">
        <mat-form-field appearance="outline">
          <mat-label><b>Username</b></mat-label>
          <input
            matInput
            type="text"
            class="form-control"
            name="username"
            formControlName="username"
            required
            #username
            [ngClass]="{
              'is-invalid': form.controls.username.hasError('required')
            }"
          />
          @if (form.controls.username.hasError('required')) {
          <mat-error>The username is required!</mat-error>
          }
        </mat-form-field>
        <br />
        <br />
        <mat-form-field appearance="outline">
          <mat-label><b>Password</b></mat-label>
          <input
            matInput
            type="password"
            class="form-control"
            formControlName="password"
            required
            minlength="6"
            [ngClass]="{
              'is-invalid': form.controls.password.hasError('required')
            }"
          />
          <mat-error>
            @if (!form.controls.password.valid) { @if
            (form.controls.password.hasError('required')) { The password is required! }
            @if (form.controls.password.value!.length! < 6) { The password is too short! } }
          </mat-error>
        </mat-form-field>
        <br />
        <br />
        <div>
          <a href="/auth/register"
            >New here? Register!</a
          >
        </div>
        <br />
        <div>
          <button
            mat-raised-button
            color="primary"
            class="btn btn-primary btn-block"
            [disabled]="!form.valid"
            (click)="onSubmit()"
          >
            Log In
          </button>
        </div>
      </form>
      } @else {
      <p>The user has already logged in as {{user.username}}.</p>
      <br />
      }
    </mat-card-content>
  </mat-card>
